<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>๐ ุงููุฑูุจุงุช | ุดุฑูุฉ ุนุฏูุงู ุณูุงุฑู</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    body {font-family:"Cairo",sans-serif;background:#f9fafc;}
    thead.table-primary{background:linear-gradient(90deg,#2563eb,#1d4ed8);color:#fff}
    tbody tr:hover{background:#f1f5ff;transition:.2s}
    .summary-box{background:linear-gradient(90deg,#22c55e,#16a34a);color:#fff;border-radius:10px;padding:15px;margin-top:15px;display:flex;justify-content:space-between}
  </style>
</head>
<body>
  <div class="container py-4">
    <h2 class="fw-bold text-primary mb-4">๐ ุฅุฏุงุฑุฉ ุงููุฑูุจุงุช</h2>

    <div class="mb-3 d-flex gap-2">
      <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addModal"><i class="fa-solid fa-plus"></i> ุฅุถุงูุฉ ูุฑูุจุฉ</button>
      <button class="btn btn-secondary" onclick="printTable('vehiclesTable')"><i class="fa-solid fa-print"></i> ุทุจุงุนุฉ ุงูุฌุฏูู</button>
    </div>

    <div class="card shadow-sm border-0 mb-4">
      <div class="card-body">
        <table class="table table-striped text-center align-middle" id="vehiclesTable">
          <thead class="table-primary"><tr><th>ุฑูู ุงูููุญุฉ</th><th>ุงูุณุงุฆู</th><th>ุงููููุน ุงูุญุงูู</th><th>ุงูุญุงูุฉ</th><th>โ๏ธ</th></tr></thead>
          <tbody id="rows"><tr><td colspan="5" class="text-muted">ุฌุงุฑู ุงูุชุญููู...</td></tr></tbody>
        </table>
      </div>
    </div>

    <div class="summary-box">
      <div>ุนุฏุฏ ุงููุฑูุจุงุช ุงููุดุทุฉ: <span id="vehicleCount">0</span></div>
      <i class="fa-solid fa-truck"></i>
    </div>

    <!-- ุนุฏุงุฏ ุงููุฑูุจุฉ -->
    <div class="card shadow-sm border-0 mt-5">
      <div class="card-header bg-primary text-white d-flex justify-content-between">
        <h5 class="mb-0"><i class="fa-solid fa-gauge"></i> ุนุฏุงุฏ ุงููุฑูุจุฉ ุงููููู</h5>
        <div class="d-flex gap-2">
          <button class="btn btn-light btn-sm" data-bs-toggle="modal" data-bs-target="#addLogModal"><i class="fa-solid fa-plus text-primary"></i> ุฅุถุงูุฉ ุณุฌู</button>
          <button class="btn btn-light btn-sm" onclick="printTable('vehicleLogsTable')"><i class="fa-solid fa-print text-primary"></i> ุทุจุงุนุฉ ุงูุฌุฏูู</button>
        </div>
      </div>
      <div class="card-body">
        <table class="table table-striped text-center align-middle" id="vehicleLogsTable">
          <thead class="table-primary"><tr><th>๐ ุงูุชุงุฑูุฎ</th><th>ุงูุณุงุฆู</th><th>ุฑูู ุงููุฑูุจุฉ</th><th>ุงูุจุฏุงูุฉ</th><th>ุงูููุงูุฉ</th><th>ุงููุณุงูุฉ</th></tr></thead>
          <tbody><tr><td colspan="6" class="text-muted">ุฌุงุฑู ุงูุชุญููู...</td></tr></tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Modal ุฅุถุงูุฉ -->
  <div class="modal fade" id="addModal" tabindex="-1">
    <div class="modal-dialog"><div class="modal-content">
      <div class="modal-header bg-primary text-white"><h5 class="modal-title">ุฅุถุงูุฉ ูุฑูุจุฉ</h5><button class="btn-close" data-bs-dismiss="modal"></button></div>
      <div class="modal-body">
        <form id="addForm" class="row g-3">
          <div class="col-md-6"><label>ุฑูู ุงูููุญุฉ</label><input name="plate" class="form-control" required></div>
          <div class="col-md-6"><label>ุงุณู ุงูุณุงุฆู</label><input name="driver" class="form-control" required></div>
          <div class="col-md-8"><label>ุงููููุน ุงูุญุงูู</label><input name="location" class="form-control"></div>
          <div class="col-md-4"><label>ุงูุญุงูุฉ</label><input name="status" class="form-control" value="ูุดุทุฉ"></div>
          <div class="col-12 text-end"><button class="btn btn-success">ุญูุธ</button></div>
        </form>
      </div>
    </div></div>
  </div>

  <!-- Modal ุนุฏุงุฏ -->
  <div class="modal fade" id="addLogModal" tabindex="-1">
    <div class="modal-dialog"><div class="modal-content">
      <div class="modal-header bg-primary text-white"><h5 class="modal-title">ุฅุถุงูุฉ ุณุฌู ุนุฏุงุฏ</h5><button class="btn-close" data-bs-dismiss="modal"></button></div>
      <div class="modal-body">
        <form id="vehicleLogForm" class="row g-3">
          <div class="col-12"><label>ุงุณู ุงูุณุงุฆู</label><select id="driverSelect" class="form-select" required></select></div>
          <div class="col-12"><label>ุฑูู ุงููุฑูุจุฉ</label><input id="vehicleNumber" class="form-control" readonly></div>
          <div class="col-md-6"><label>ุนุฏุงุฏ ุงูุจุฏุงูุฉ</label><input type="number" name="odometer_start" class="form-control" required></div>
          <div class="col-md-6"><label>ุนุฏุงุฏ ุงูููุงูุฉ</label><input type="number" name="odometer_end" class="form-control" required></div>
          <div class="col-12 text-end"><button class="btn btn-success">ุญูุธ</button></div>
        </form>
      </div>
    </div></div>
  </div>

  <script src="js/vehicles-frontend.js"></script>
  <script>
    function printTable(tableId){
      const table = document.getElementById(tableId).outerHTML;
      const w = window.open('');
      w.document.write('<html><head><title>ุทุจุงุนุฉ</title></head><body>'+table+'</body></html>');
      w.print(); w.close();
    }
  </script>
</body>
</html>
